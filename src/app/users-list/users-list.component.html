<div class="table-container">
    <form [formGroup]="editForm">
        <app-table [dataSource]="dataSource" [columns]="displayedColumns"
                   matSort #sort="matSort">
            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <input [value]="element.email" formControlName="email">
                    } @else {
                        {{ element.email }}
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="name.first">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Firstname</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <input [value]="element.name.first" formControlName="name.first">
                    } @else {
                        {{ element.name.first }}
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="name.last">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Lastname</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <input [value]="element.name.last" formControlName="name.last">
                    } @else {
                        {{ element.name.last }}
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <input [value]="element.phone" formControlName="phone">
                    } @else {
                        {{ element.phone }}
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="location.city">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> City</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <input [value]="element.location.city" formControlName="location.city">
                    } @else {
                        {{ element.location.city }}
                    }
                </td>
            </ng-container>

            <ng-container matColumnDef="edit">
                <th mat-header-cell *matHeaderCellDef>Edit</th>
                <td mat-cell *matCellDef="let element">
                    @if (element == editRow) {
                        <button (click)="saveUser(element)">
                            <mat-icon>save</mat-icon>
                        </button>
                    } @else {
                        <button (click)="editUserList(element)">
                            <mat-icon>edit</mat-icon>
                        </button>
                    }
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Row shown when there is no matching data that will be provided to the wrapper table. -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="6">No data</td>
            </tr>
        </app-table>
    </form>
</div>
